# --- Paragraphs ---

- in: hello world!
  out:
    - type: paragraph
      content: [{ type: text, data: "hello world!" }]

- in: |
    foo bar

    hello world

    123 123 123
  out:
    - type: paragraph
      content: [{ type: text, data: "foo bar" }]
    - type: paragraph
      content: [{ type: text, data: "hello world" }]
    - type: paragraph
      content: [{ type: text, data: "123 123 123" }]

# --- Headings ---

- in: "== Heading =="
  out:
    - type: header
      depth: 1
      content: [{ type: text, data: Heading }]

- in: "=== Heading ==="
  out:
    - type: header
      depth: 2
      content: [{ type: text, data: Heading }]

- in: "== Heading {{Anker|foo}} =="
  out:
    - type: header
      anchor: foo
      depth: 1
      content: [{ type: text, data: Heading }]

# --- Tables ---

- in: |
    {|
    |  Orange || Apple
    |-
    |  Bread  || Pie
    |}
  out:
    - type: table
      content:
        - type: tr
          content:
            - type: td
              content: [{ type: text, data: "Orange" }]
            - type: td
              content: [{ type: text, data: "Apple" }]
        - type: tr
          content:
            - type: td
              content: [{ type: text, data: "Bread" }]
            - type: td
              content: [{ type: text, data: "Pie" }]

- in: |
    {|
    !  Orange !! Apple
    |-
    |  Bread  || Pie
    |}
  out:
    - type: table
      content:
        - type: tr
          content:
            - type: th
              content: [{ type: text, data: "Orange" }]
            - type: th
              content: [{ type: text, data: "Apple" }]
        - type: tr
          content:
            - type: td
              content: [{ type: text, data: "Bread" }]
            - type: td
              content: [{ type: text, data: "Pie" }]

# --- Lists ---

- in: |
    * item1
    * item2
    * item3
  out:
    - type: list
      ordered: false
      items:
        - type: listitem
          content: [{ type: text, data: "item1" }]
        - type: listitem
          content: [{ type: text, data: "item2" }]
        - type: listitem
          content: [{ type: text, data: "item3" }]

- in: |
    # item1
    # item2
    # item3
  out:
    - type: list
      ordered: true
      items:
        - type: listitem
          content: [{ type: text, data: "item1" }]
        - type: listitem
          content: [{ type: text, data: "item2" }]
        - type: listitem
          content: [{ type: text, data: "item3" }]

- in: |
    {{Liste
     |item1=text1
     |item2=text2
     |item3=text3
    }}
  out:
    - type: list
      ordered: false
      items:
        - type: itemlist
          content:
            - type: paragraph
              content: [{ type: text, data: "text1" }]
        - type: itemlist
          content:
            - type: paragraph
              content: [{ type: text, data: "text2" }]
        - type: itemlist
          content:
            - type: paragraph
              content: [{ type: text, data: "text3" }]

- in: |
    {{Liste
     |type=ol
     |item1=text1
     |item2=text2
     |item3=text3
    }}
  out:
    - type: list
      ordered: true
      items:
        - type: itemlist
          content:
            - type: paragraph
              content: [{ type: text, data: "text1" }]
        - type: itemlist
          content:
            - type: paragraph
              content: [{ type: text, data: "text2" }]
        - type: itemlist
          content:
            - type: paragraph
              content: [{ type: text, data: "text3" }]

# --- Images ---

- in: "[[File:Foo.jpg|center|bar]]"
  out:
    - type: image
      caption:
        - { type: text, data: bar }
      name: Foo.jpg
      url: "//upload.wikimedia.org/wikipedia/commons/0/06/Foo.jpg"
      thumbnail: False

- in: "[[File:Foo.jpg|thumb|bar]]"
  out:
    - type: image
      caption:
        - { type: text, data: bar }
      name: Foo.jpg
      url: "//upload.wikimedia.org/wikipedia/commons/thumb/0/06/Foo.jpg/220px-Foo.jpg"
      thumbnail: True

- in: "[[File:Foo.jpg|thumb|50px|bar]]"
  out:
    - type: image
      caption:
        - { type: text, data: bar }
      name: Foo.jpg
      url: "//upload.wikimedia.org/wikipedia/commons/thumb/0/06/Foo.jpg/50px-Foo.jpg"
      thumbnail: True


- in: "[[File:Foo.jpg|center|50px|bar]]"
  out:
    - type: image
      caption:
        - { type: text, data: bar }
      name: Foo.jpg
      url: "//upload.wikimedia.org/wikipedia/commons/thumb/0/06/Foo.jpg/50px-Foo.jpg"
      thumbnail: False

# --- Equations ---

- in: "{{Formel|<math>x^2</math>}}"
  out:
    - type: equation
      formula: x^2

- in: "{{Formel|<math>\\begin{align} x^2 \\end{align}</math>}}"
  out:
    - type: equation
      formula: x^2

# --- Galleries ---

- in: |
    <gallery>
    Foo.jpg|foo
    Bar.svg|bar
    </gallery>
  out:
    - type: gallery
      widths: 120
      heights: 120
      items:
        - type: galleryitem
          name: Foo.jpg
          caption:
            - { type: text, data: foo }
        - type: galleryitem
          name: Bar.svg
          caption:
            - { type: text, data: bar }

- in: |
    <gallery widths=200 heights=200>
    Foo.jpg|''foo''
    Bar.svg|bar <math>x^2</math>
    </gallery>
  out:
    - type: gallery
      widths: 200
      heights: 200
      items:
        - type: galleryitem
          name: Foo.jpg
          caption:
            - type: i
              content:
                - { type: text, data: foo }
        - type: galleryitem
          name: Bar.svg
          caption:
            - { type: text, data: "bar " }
            - { type: inlinemath, formula: "x^2" }

# --- Boxes ---
- in: |
    {{:Mathe für Nicht-Freaks: Vorlage:Definition
     |titel=foo
     |definition=bar
    }}
  out:
    - type: definition
      title: foo
      definition:
        - type: paragraph
          content: [{ type: text, data: "bar"}]

- in: |
    {{:Mathe für Nicht-Freaks: Vorlage:Definition
     |definition=bar
    }}
  out:
    - type: definition
      definition:
        - type: paragraph
          content: [{ type: text, data: "bar"}]

- in: |
    {{:Mathe für Nicht-Freaks: Vorlage:Beispiel
     |titel=foo
     |beispiel=bar
    }}
  out:
    - type: example
      title: foo
      example:
        - type: paragraph
          content: [{ type: text, data: "bar"}]

- in: |
    {{:Mathe für Nicht-Freaks: Vorlage:Satz
     |titel=foo
     |satz=satz
     |erklärung=erklärung
     |beispiel=beispiel
     |zusammenfassung=zusammenfassung
     |lösung=lösung
     |lösungsweg=lösungsweg
     |beweis=beweis
     |beweis2=alternativer beweis
    }}
  out:
    - type: theorem
      title: foo
      theorem:
        - type: paragraph
          content: [{ type: text, data: "satz"}]
      explanation:
        - type: paragraph
          content: [{ type: text, data: "erklärung"}]
      example:
        - type: paragraph
          content: [{ type: text, data: "beispiel"}]
      proof_summary:
        - type: paragraph
          content: [{ type: text, data: "zusammenfassung"}]
      solution:
        - type: paragraph
          content: [{ type: text, data: "lösung"}]
      solution_process:
        - type: paragraph
          content: [{ type: text, data: "lösungsweg"}]
      proof:
        - type: paragraph
          content: [{ type: text, data: "beweis"}]
      alternative_proof:
        - type: paragraph
          content: [{ type: text, data: "alternativer beweis"}]

- in: |
    {{:Mathe für Nicht-Freaks: Vorlage:Aufgabe
     |titel=foo
     |aufgabe=aufgabe
     |erklärung=erklärung
     |beispiel=beispiel
     |zusammenfassung=zusammenfassung
     |lösung=lösung
     |lösungsweg=lösungsweg
     |beweis=beweis
     |beweis2=alternativer beweis
    }}
  out:
    - type: exercise
      title: foo
      exercise:
        - type: paragraph
          content: [{ type: text, data: "aufgabe"}]
      explanation:
        - type: paragraph
          content: [{ type: text, data: "erklärung"}]
      example:
        - type: paragraph
          content: [{ type: text, data: "beispiel"}]
      proof_summary:
        - type: paragraph
          content: [{ type: text, data: "zusammenfassung"}]
      solution:
        - type: paragraph
          content: [{ type: text, data: "lösung"}]
      solution_process:
        - type: paragraph
          content: [{ type: text, data: "lösungsweg"}]
      proof:
        - type: paragraph
          content: [{ type: text, data: "beweis"}]
      alternative_proof:
        - type: paragraph
          content: [{ type: text, data: "alternativer beweis"}]

- in: |
    {{:Mathe für Nicht-Freaks: Vorlage:Beispiel
     |beispiel=bar
    }}
  out:
    - type: example
      example:
        - type: paragraph
          content: [{ type: text, data: "bar"}]

- in: |
    {{:Mathe für Nicht-Freaks: Vorlage:Beweis
     |titel=foo
     |beweis=bar
    }}
  out:
    - type: proof
      title: foo
      proof:
        - type: paragraph
          content: [{ type: text, data: "bar"}]

- in: |
    {{:Mathe für Nicht-Freaks: Vorlage:Alternativer Beweis
     |titel=foo
     |beweis=bar
    }}
  out:
    - type: alternative_proof
      title: foo
      alternative_proof:
        - type: paragraph
          content: [{ type: text, data: "bar"}]

- in: |
    {{:Mathe für Nicht-Freaks: Vorlage:Beweiszusammenfassung
     |titel=foo
     |zusammenfassung=bar
    }}
  out:
    - type: proof_summary
      title: foo
      proof_summary:
        - type: paragraph
          content: [{ type: text, data: "bar"}]

- in: |
    {{:Mathe für Nicht-Freaks: Vorlage:Lösungsweg
     |titel=foo
     |lösungsweg=bar
    }}
  out:
    - type: solution_process
      title: foo
      solution_process:
        - type: paragraph
          content: [{ type: text, data: "bar"}]

- in: |
    {{:Mathe für Nicht-Freaks: Vorlage:Lösung
     |titel=foo
     |lösung=bar
    }}
  out:
    - type: solution
      title: foo
      solution:
        - type: paragraph
          content: [{ type: text, data: "bar"}]

- in: |
    {{:Mathe für Nicht-Freaks: Vorlage:Warnung
     |bar
    }}
  out:
    - type: warning
      warning:
        - type: paragraph
          content: [{ type: text, data: "bar"}]

- in: |
    {{:Mathe für Nicht-Freaks: Vorlage:Hinweis
     |bar
    }}
  out:
    - type: hint
      hint:
        - type: paragraph
          content: [{ type: text, data: "bar"}]

# --- Handling of Header and Footer ---

- in: |
    {{#invoke:Mathe für Nicht-Freaks/Seite|oben}}

    Hello World

    {{#invoke:Mathe für Nicht-Freaks/Seite|unten}}
  out:
    - type: paragraph
      content:
        - type: text
          data: "Hello World"

# === Invalid formats ===
# The following formats are valid MediaWiki code but are forbidden in the
# project „Mathe für Nicht-Freaks“.

# --- Headings ---

- in: "==== Heading ===="
  out:
    - type: error
      message: "Heading of depth 4 is not allowed"

- in: "= Heading ="
  out:
    - type: error
      message: "Heading of depth 1 is not allowed"

- in: "===== Heading ====="
  out:
    - type: error
      message: "Heading of depth 5 is not allowed"

- in: "====== Heading ======"
  out:
    - type: error
      message: "Heading of depth 6 is not allowed"

- in: |
    <gallery widths=200>
    Foo.jpg
    Bar.svg|bar
    </gallery>
  out:
    - type: gallery
      widths: 200
      heights: 120
      items:
        - type: error
          message: "Gallery item needs a caption"
        - type: galleryitem
          name: Bar.svg
          caption:
            - { type: text, data: bar }
