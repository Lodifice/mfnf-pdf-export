# --- Paragraphs ---

- in: hello world!
  out:
    - type: paragraph
      children: [{ type: text, data: "hello world!" }]

- in: |
    foo bar

    hello world

    123 123 123
  out:
    - type: paragraph
      children: [{ type: text, data: "foo bar" }]
    - type: paragraph
      children: [{ type: text, data: "hello world" }]
    - type: paragraph
      children: [{ type: text, data: "123 123 123" }]

# --- Headings ---

- in: "== Heading =="
  out:
    - type: header
      depth: 1
      children: [{ type: text, data: Heading }]

- in: "=== Heading ==="
  out:
    - type: header
      depth: 2
      children: [{ type: text, data: Heading }]

- in: "== Heading {{Anker|foo}} =="
  out:
    - type: header
      anchor: foo
      depth: 1
      children: [{ type: text, data: Heading }]

# --- Tables ---

- in: |
    {|
    |  Orange || Apple
    |-
    |  Bread  || Pie
    |}
  out:
    - type: table
      children:
        - type: tr
          children:
            - type: td
              children: [{ type: text, data: "Orange" }]
            - type: td
              children: [{ type: text, data: "Apple" }]
        - type: tr
          children:
            - type: td
              children: [{ type: text, data: "Bread" }]
            - type: td
              children: [{ type: text, data: "Pie" }]

- in: |
    {|
    !  Orange !! Apple
    |-
    |  Bread  || Pie
    |}
  out:
    - type: table
      children:
        - type: tr
          children:
            - type: th
              children: [{ type: text, data: "Orange" }]
            - type: th
              children: [{ type: text, data: "Apple" }]
        - type: tr
          children:
            - type: td
              children: [{ type: text, data: "Bread" }]
            - type: td
              children: [{ type: text, data: "Pie" }]

# --- Lists ---

- in: |
    * item1
    * item2
    * item3
  out:
    - type: list
      ordered: false
      children:
        - [{ type: text, data: "item1" }]
        - [{ type: text, data: "item2" }]
        - [{ type: text, data: "item3" }]

- in: |
    # item1
    # item2
    # item3
  out:
    - type: list
      ordered: true
      children:
        - [{ type: text, data: "item1" }]
        - [{ type: text, data: "item2" }]
        - [{ type: text, data: "item3" }]

- in: |
    {{Liste
     |item1=text1
     |item2=text2
     |item3=text3
    }}
  out:
    - type: list
      ordered: false
      children:
        - - type: paragraph
            children: [{ type: text, data: "text1" }]
        - - type: paragraph
            children: [{ type: text, data: "text2" }]
        - - type: paragraph
            children: [{ type: text, data: "text3" }]

- in: |
    {{Liste
     |type=ol
     |item1=text1
     |item2=text2
     |item3=text3
    }}
  out:
    - type: list
      ordered: true
      children:
        - - type: paragraph
            children: [{ type: text, data: "text1" }]
        - - type: paragraph
            children: [{ type: text, data: "text2" }]
        - - type: paragraph
            children: [{ type: text, data: "text3" }]

# --- Images ---

- in: "[[File:Foo.jpg|center|bar]]"
  out:
    - type: image
      caption:
        - { type: text, data: bar }
      name: Foo.jpg
      url: "//upload.wikimedia.org/wikipedia/commons/0/06/Foo.jpg"
      thumbnail: False

- in: "[[File:Foo.jpg|thumb|bar]]"
  out:
    - type: image
      caption:
        - { type: text, data: bar }
      name: Foo.jpg
      url: "//upload.wikimedia.org/wikipedia/commons/thumb/0/06/Foo.jpg/220px-Foo.jpg"
      thumbnail: True

- in: "[[File:Foo.jpg|thumb|50px|bar]]"
  out:
    - type: image
      caption:
        - { type: text, data: bar }
      name: Foo.jpg
      url: "//upload.wikimedia.org/wikipedia/commons/thumb/0/06/Foo.jpg/50px-Foo.jpg"
      thumbnail: True


- in: "[[File:Foo.jpg|center|50px|bar]]"
  out:
    - type: image
      caption:
        - { type: text, data: bar }
      name: Foo.jpg
      url: "//upload.wikimedia.org/wikipedia/commons/thumb/0/06/Foo.jpg/50px-Foo.jpg"
      thumbnail: False

# --- Equations ---

- in: "{{Formel|<math>x^2</math>}}"
  out:
    - type: equation
      formula: x^2

- in: "{{Formel|<math>\\begin{align} x^2 \\end{align}</math>}}"
  out:
    - type: equation
      formula: x^2

# --- Galleries ---

- in: |
    <gallery>
    Foo.jpg|foo
    Bar.svg|bar
    </gallery>
  out:
    - type: gallery
      widths: 120
      heights: 120
      children:
        - type: galleryitem
          name: Foo.jpg
          caption:
            - { type: text, data: foo }
        - type: galleryitem
          name: Bar.svg
          caption:
            - { type: text, data: bar }

- in: |
    <gallery widths=200 heights=200>
    Foo.jpg|''foo''
    Bar.svg|bar <math>x^2</math>
    </gallery>
  out:
    - type: gallery
      widths: 200
      heights: 200
      children:
        - type: galleryitem
          name: Foo.jpg
          caption:
            - type: i
              children:
                - { type: text, data: foo }
        - type: galleryitem
          name: Bar.svg
          caption:
            - { type: text, data: "bar " }
            - { type: inlinemath, formula: "x^2" }

# --- Handling of Header and Footer ---

- in: |
    {{#invoke:Mathe für Nicht-Freaks/Seite|oben}}

    Hello World

    {{#invoke:Mathe für Nicht-Freaks/Seite|unten}}
  out:
    - type: paragraph
      children:
        - type: text
          data: "Hello World"

# === Invalid formats ===
# The following formats are valid MediaWiki code but are forbidden in the
# project „Mathe für Nicht-Freaks“.

# --- Headings ---

- in: "==== Heading ===="
  out:
    - type: error
      message: "Heading of depth 4 is not allowed"

- in: "= Heading ="
  out:
    - type: error
      message: "Heading of depth 1 is not allowed"

- in: "===== Heading ====="
  out:
    - type: error
      message: "Heading of depth 5 is not allowed"

- in: "====== Heading ======"
  out:
    - type: error
      message: "Heading of depth 6 is not allowed"

- in: |
    <gallery widths=200>
    Foo.jpg
    Bar.svg|bar
    </gallery>
  out:
    - type: gallery
      widths: 200
      heights: 120
      children:
        - type: error
          message: "Gallery item needs a caption"
        - type: galleryitem
          name: Bar.svg
          caption:
            - { type: text, data: bar }
